


          
# وصف مشروع الباك اند لمتجر زيت الزيتون الطبيعي

هذا المشروع يحتوي على واجهة خلفية (Backend) مبنية باستخدام Node.js مع Express.js و MongoDB لإدارة البيانات. الهدف من الباك اند هو توفير API متكامل لإدارة المستخدمين، الطلبات، التقييمات، وإعدادات المنتج.

## المكونات الرئيسية

### 1. الهيكلية العامة
- **index.js**: نقطة الدخول للتطبيق، يقوم بتهيئة الاتصال بقاعدة البيانات، إعدادات CORS، تحديد حدود الطلبات (Rate Limiting)، وتوصيل الراوترات المختلفة.
- **config/db.js**: ملف مسؤول عن الاتصال بقاعدة بيانات MongoDB.
- **middleware/auth.js**: يحتوي على Middleware لحماية المسارات (JWT Authentication)، التحقق من صلاحيات الأدمن، وتعقيم المدخلات.

### 2. النماذج (Models)
- **User.js**: نموذج المستخدم يحتوي على الاسم، البريد الإلكتروني، كلمة المرور، وحقل لتحديد إذا كان المستخدم أدمن.
- **Order.js**: نموذج الطلب يحتوي على بيانات الطلب مثل المستخدم، الاسم، الهاتف، العنوان، المدينة، الكمية، السعر، والحالة.
- **Review.js**: نموذج التقييم يحتوي على المستخدم، التقييم (من 1 إلى 5)، والتعليق.
- **ProductSettings.js**: نموذج إعدادات المنتج يحتوي على السعر الأساسي، خيارات الكميات والأسعار، والخصم الرئيسي.

### 3. الراوترات (Routes)
- **user.js**: إدارة تسجيل المستخدمين، تسجيل الدخول، والتحقق من تسجيل الدخول باستخدام JWT.
- **order.js**: إنشاء الطلبات، جلب طلبات المستخدم، جلب كل الطلبات (للأدمن)، تعديل حالة الطلب.
- **review.js**: إضافة تقييم جديد مرتبط بالمستخدم، وجلب كل التقييمات مع اسم المستخدم.
- **productSettings.js**: جلب وتعديل إعدادات المنتج (للأدمن فقط).

### 4. الحماية والتوثيق
- يستخدم JWT لتوثيق المستخدمين وحماية المسارات الخاصة.
- يتم إرسال التوكن في كوكيز httpOnly مع إعدادات أمان مثل `secure` و `sameSite`.
- Middleware `protect` يتحقق من وجود التوكن وصلاحيته.
- Middleware `admin` يتحقق من صلاحيات الأدمن.

### 5. مميزات إضافية
- تعقيم المدخلات النصية لمنع هجمات XSS.
- تحديد حدود للطلبات (Rate Limiting) لمنع الهجمات.
- دعم CORS مع السماح لأصول محددة فقط.

## ملخص
الباك اند يوفر API متكامل وآمن لإدارة المستخدمين، الطلبات، التقييمات، وإعدادات المنتج مع حماية جيدة باستخدام JWT وتعقيم المدخلات. يستخدم MongoDB لتخزين البيانات و Express.js لتسهيل بناء API.
        
